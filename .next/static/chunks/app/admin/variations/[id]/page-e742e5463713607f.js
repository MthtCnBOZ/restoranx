(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9789],{285:(e,a,r)=>{"use strict";r.d(a,{$:()=>o});var t=r(5155);r(2115);var s=r(9708),i=r(2085),n=r(9434);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:a,variant:r,size:i,asChild:o=!1,...d}=e,c=o?s.DX:"button";return(0,t.jsx)(c,{"data-slot":"button",className:(0,n.cn)(l({variant:r,size:i,className:a})),...d})}},333:(e,a,r)=>{"use strict";r.d(a,{d:()=>n});var t=r(5155);r(2115);var s=r(4884),i=r(9434);function n(e){let{className:a,...r}=e;return(0,t.jsx)(s.bL,{"data-slot":"switch",className:(0,i.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...r,children:(0,t.jsx)(s.zi,{"data-slot":"switch-thumb",className:(0,i.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}},1154:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(9946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2523:(e,a,r)=>{"use strict";r.d(a,{p:()=>i});var t=r(5155);r(2115);var s=r(9434);function i(e){let{className:a,type:r,...i}=e;return(0,t.jsx)("input",{type:r,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...i})}},5057:(e,a,r)=>{"use strict";r.d(a,{J:()=>n});var t=r(5155);r(2115);var s=r(968),i=r(9434);function n(e){let{className:a,...r}=e;return(0,t.jsx)(s.b,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...r})}},6695:(e,a,r)=>{"use strict";r.d(a,{BT:()=>o,Wu:()=>d,ZB:()=>l,Zp:()=>i,aR:()=>n,wL:()=>c});var t=r(5155);r(2115);var s=r(9434);function i(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...r})}function n(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...r})}function l(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",a),...r})}function o(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",a),...r})}function d(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",a),...r})}function c(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,s.cn)("flex items-center px-6 [.border-t]:pt-6",a),...r})}},7083:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>y});var t=r(5155),s=r(2115),i=r(285),n=r(6695),l=r(2523),o=r(5057),d=r(8539),c=r(5695),u=r(6671),m=r(6874),p=r.n(m),h=r(1154),x=r(7550),f=r(4616),g=r(1492),v=r(4416),b=r(333);function y(e){let{params:a}=e,r=(0,c.useRouter)(),m=a.id,[y,j]=(0,s.useState)(!1),[k,N]=(0,s.useState)(!0),[w,V]=(0,s.useState)({name:"",description:""}),[z,C]=(0,s.useState)([]);(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/admin/variations/".concat(m));if(!e.ok)throw Error("Varyasyon bilgileri alınamadı");let a=await e.json();V({name:a.variation.name,description:a.variation.description||""}),C(a.variation.variationoption.map(e=>({id:e.id,name:e.name,price:e.price.toString(),isDefault:e.isDefault})))}catch(e){console.error("Varyasyon getirme hatası:",e),u.oR.error("Varyasyon bilgileri y\xfcklenirken bir hata oluştu"),r.push("/admin/variations")}finally{N(!1)}})()},[m,r]);let D=e=>{let{name:a,value:r}=e.target;V({...w,[a]:r})},A=(e,a,r)=>{let t=[...z];t[e]={...t[e],[a]:r},C(t)},S=e=>{if(1===z.length){u.oR.error("En az bir se\xe7enek gereklidir");return}let a=[...z];a.splice(e,1),z[e].isDefault&&a.length>0&&(a[0].isDefault=!0),C(a)},R=e=>{C(z.map((a,r)=>({...a,isDefault:r===e})))},_=(e,a)=>{if("up"===a&&0===e||"down"===a&&e===z.length-1)return;let r=[...z],t="up"===a?e-1:e+1;[r[e],r[t]]=[r[t],r[e]],C(r)},E=e=>""===e||/^[0-9]*\.?[0-9]*$/.test(e),$=async e=>{e.preventDefault(),j(!0);try{if(!w.name){u.oR.error("Varyasyon adı zorunludur"),j(!1);return}if(z.some(e=>!e.name)){u.oR.error("T\xfcm se\xe7enekler i\xe7in isim belirtilmelidir"),j(!1);return}if(!z.some(e=>e.isDefault)){u.oR.warning("Varsayılan bir se\xe7enek belirtilmedi. İlk se\xe7enek varsayılan olarak ayarlanacak.");let e=[...z];e[0].isDefault=!0,C(e)}let e=await fetch("/api/admin/variations/".concat(m),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({...w,options:z})}),a=await e.json();if(!e.ok)throw Error(a.error||"Varyasyon g\xfcncellenirken bir hata oluştu");u.oR.success("Varyasyon başarıyla g\xfcncellendi"),r.push("/admin/variations")}catch(e){console.error("Varyasyon g\xfcncelleme hatası:",e),u.oR.error(e.message||"Varyasyon g\xfcncellenirken bir hata oluştu")}finally{j(!1)}};return k?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-64",children:[(0,t.jsx)(h.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,t.jsx)("p",{className:"mt-2 text-muted-foreground",children:"Varyasyon bilgileri y\xfckleniyor..."})]}):(0,t.jsxs)("div",{className:"flex flex-col gap-4 md:gap-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.$,{variant:"ghost",size:"sm",asChild:!0,children:(0,t.jsxs)(p(),{href:"/admin/variations",className:"flex items-center gap-1",children:[(0,t.jsx)(x.A,{className:"h-4 w-4"}),"Geri"]})}),(0,t.jsx)("h1",{className:"text-2xl md:text-3xl font-bold",children:"Varyasyon D\xfczenle"})]}),(0,t.jsx)(n.Zp,{children:(0,t.jsxs)("form",{onSubmit:$,children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsx)(n.ZB,{children:"Varyasyon Bilgileri"}),(0,t.jsx)(n.BT,{children:"Varyasyon bilgilerini ve se\xe7eneklerini d\xfczenleyin"})]}),(0,t.jsxs)(n.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsxs)(o.J,{htmlFor:"name",children:["Varyasyon Adı ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(l.p,{id:"name",name:"name",placeholder:"\xd6rn: Pizza Boyutu",value:w.name,onChange:D,required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(o.J,{htmlFor:"description",children:"A\xe7ıklama"}),(0,t.jsx)(d.T,{id:"description",name:"description",placeholder:"Varyasyon hakkında a\xe7ıklama (opsiyonel)",value:w.description,onChange:D,rows:3})]}),(0,t.jsxs)("div",{className:"border-t pt-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:"Varyasyon Se\xe7enekleri"}),(0,t.jsxs)(i.$,{type:"button",onClick:()=>{C([...z,{name:"",price:"",isDefault:!1}])},variant:"outline",size:"sm",className:"flex items-center gap-1",children:[(0,t.jsx)(f.A,{className:"h-4 w-4"}),"Yeni Se\xe7enek Ekle"]})]}),(0,t.jsx)("div",{className:"space-y-4",children:z.map((e,a)=>(0,t.jsx)("div",{className:"border rounded-md p-4 relative",children:(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-4",children:[(0,t.jsxs)("div",{className:"col-span-5",children:[(0,t.jsxs)(o.J,{htmlFor:"option-name-".concat(a),children:["Se\xe7enek Adı ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(l.p,{id:"option-name-".concat(a),placeholder:"\xd6rn: B\xfcy\xfck Boy",value:e.name,onChange:e=>A(a,"name",e.target.value),required:!0,className:"mt-1"})]}),(0,t.jsxs)("div",{className:"col-span-3",children:[(0,t.jsx)(o.J,{htmlFor:"option-price-".concat(a),children:"Ek Fiyat (₺)"}),(0,t.jsx)(l.p,{id:"option-price-".concat(a),placeholder:"\xd6rn: 10.50",value:e.price,onChange:e=>{E(e.target.value)&&A(a,"price",e.target.value)},className:"mt-1",type:"text",inputMode:"decimal"})]}),(0,t.jsxs)("div",{className:"col-span-4 flex items-end space-x-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,t.jsx)(b.d,{id:"option-default-".concat(a),checked:e.isDefault,onCheckedChange:()=>R(a)}),(0,t.jsx)(o.J,{htmlFor:"option-default-".concat(a),className:"cursor-pointer",children:"Varsayılan"})]}),(0,t.jsxs)("div",{className:"flex space-x-1 mt-1",children:[(0,t.jsxs)(i.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>_(a,"up"),disabled:0===a,className:"h-8 w-8",children:[(0,t.jsx)(g.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Sırayı Değiştir"})]}),(0,t.jsxs)(i.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>S(a),className:"h-8 w-8 text-red-500 hover:text-red-600",children:[(0,t.jsx)(v.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Sil"})]})]})]})]})},e.id||a))})]})]}),(0,t.jsxs)(n.wL,{className:"flex justify-between",children:[(0,t.jsx)(i.$,{type:"button",variant:"outline",onClick:()=>r.push("/admin/variations"),disabled:y,children:"İptal"}),(0,t.jsx)(i.$,{type:"submit",disabled:y,children:y?"Kaydediliyor...":"Varyasyonu G\xfcncelle"})]})]})})]})}},8539:(e,a,r)=>{"use strict";r.d(a,{T:()=>n});var t=r(5155),s=r(2115),i=r(9434);let n=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:a,...s})});n.displayName="Textarea"},9314:(e,a,r)=>{Promise.resolve().then(r.bind(r,7083))},9434:(e,a,r)=>{"use strict";r.d(a,{cn:()=>i});var t=r(2596),s=r(9688);function i(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return(0,s.QP)((0,t.$)(a))}}},e=>{var a=a=>e(e.s=a);e.O(0,[9352,6671,6874,618,8441,1684,7358],()=>a(9314)),_N_E=e.O()}]);